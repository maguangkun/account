<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>修改账单</title>
<link rel="stylesheet" href="/layui/css/layui.css" />
</head>
<body class="layui-layout-body">
	<div class="layui-layout layui-layout-admin">
		<header id="header" th:replace="top::html"></header>
		<div class="layui-body">
			<!-- 内容主体区域 -->
			<div style="padding: 15px;">

				<fieldset class="layui-elem-field layui-field-title"
					style="margin-top: 20px;">
					<legend>修改还款账单</legend>
				</fieldset>
				<form class="layui-form" action="" id="form1">
					<div class="layui-form-item">
						<label class="layui-form-label">操作员</label>
						<div class="layui-input-block">
							<input type="hidden" name="userId"  th:value ="${billObj.userId.id}"
								  class="layui-input" readonly="readonly" />
							<input type="hidden" name="id"  th:value ="${billObj.id}"
								  class="layui-input" readonly="readonly" />
							<input type="hidden" name="createBy"  th:value ="${billObj.createBy}"
								  class="layui-input" readonly="readonly" />
							<input type="hidden" name="createTime" id="date" lay-verify="date"
									placeholder="yyyy-MM-dd" autocomplete="off" readonly="readonly" class="layui-input" th:value="${#dates.format(billObj.createTime,'yyyy-MM-dd')}"   />
							<input type="text" name="userName"  th:value ="${billObj.userId.userName}"
								  placeholder="操作员" class="layui-input" readonly="readonly" />
						</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-inline">	
							<label class="layui-form-label">收货人</label>
							<div class="layui-input-inline">
								<input type="text" id="takePerson" name="takePerson" lay-verify="title"
									 placeholder="收货人" th:value = "${billObj.takePerson}" readonly="readonly" class="layui-input"/>
							</div>
							<label class="layui-form-label">收货人号码</label>
							<div class="layui-input-inline">
								<select id="takePersonPhone" name="takePersonPhone" lay-search="">
									<option selected="selected" th:value = "${billObj.takePersonPhone}" th:text = "${billObj.takePersonPhone}" />
								</select>
							</div>
						</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-inline">
							<label class="layui-form-label">货物名称</label>
							<div class="layui-input-inline">
								<select id="cargoName" name="cargoName" lay-verify="required" lay-search="">
										<option selected="selected" th:value = "${billObj.cargoName}" th:text = "${billObj.cargoName}" />
								</select>
							</div>
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">货物重量</label>
						<div class="layui-input-block">
							<input type="number" name="cargoWeight" lay-verify="number" th:value="${billObj.cargoWeight}"
								 placeholder="货物重量" readonly="readonly" class="layui-input"/>
						</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-inline">
							<label class="layui-form-label">货物单价</label>
							<div class="layui-input-inline">
								<input type="number" name="cargoOnePrice" lay-verify="number"    th:value="${billObj.cargoOnePrice}"
									 placeholder="货物单价" class="layui-input"/>
							</div>
							<label class="layui-form-label">货物总价</label>
							<div class="layui-input-inline">
								<input type="number" name="cargoManyPrice" lay-verify="number"   th:value="${billObj.cargoManyPrice}"
									 placeholder="货物总价" class="layui-input"/>
							</div>
							<label class="layui-form-label">实际总价</label>
							<div class="layui-input-inline">
								<input type="number" name="realityPrice" lay-verify="number"  th:value="${billObj.realityPrice}"
									 placeholder="实际总价" class="layui-input"/>
							</div>
						</div>
					</div>
<!-- 					<div class="layui-form-item"> -->
<!-- 						<label class="layui-form-label">是否欠账</label> -->
<!-- 						<div class="layui-input-block"> -->
<!-- 							<input type="checkbox" checked="" id = "debtState" value="欠" name="debtState" lay-skin="switch" -->
<!-- 								lay-filter="switchTest" lay-text="欠|不欠"/> -->
<!-- 						</div> -->
<!-- 					</div> -->
					<div class="layui-form-item">
					    <label class="layui-form-label">是否欠账</label>
					    <div class="layui-input-block">
					      <input type="radio" name="debtState" value="欠" title="欠" th:checked="${billObj.debtState eq '欠' }"/>
					      <input type="radio" name="debtState" value="不欠" title="不欠" th:checked="${billObj.debtState eq '不欠' }" />
					      <input type="radio" name="debtState" value="欠部分" title="欠部分" th:checked="${billObj.debtState eq '欠部分' }" />
					    </div>
					</div>
					<div class="layui-form-item">
						<div class="layui-inline">
							<label class="layui-form-label">创建日期</label>
							<div class="layui-input-inline">
							<input type="text" readonly="readonly" name="" th:value="${billObj.createTime}" class="layui-input"  />
							</div>																					
						</div>
					</div>
					<div class="layui-form-item layui-form-text">
						<label class="layui-form-label">备注</label>
						<div class="layui-input-block">
							<textarea name="remark"  placeholder="请输入内容" th:text="${billObj.remark}" class="layui-textarea"></textarea>
						</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-input-block">
							<button class="layui-btn" lay-submit="" lay-filter="demo1">立即提交</button>
							<!-- <button type="reset" class="layui-btn layui-btn-primary">重置</button> -->
						</div>
					</div>
				</form>
			</div>
		</div>
		<div class="layui-footer">
			<!-- 底部固定区域 -->
			© layui.com - 底部固定区域
		</div>
	</div>
	<script src="/layui/layui.js"></script>
	<script>
		layui.use(['form', 'layedit', 'laydate','element'], function() {
			  var form = layui.form
			  ,layer = layui.layer
			  ,layedit = layui.layedit
			  ,laydate = layui.laydate
			  ,element = layui.element;
			  form.render('select'); 
			  //日期
			  laydate.render({
			    elem: '#date'
			  });
			  //自定义验证规则
			  form.verify({
			    title: function(value){
			    	if (value.length >= 2) {

					} else {
						return '标题至少得2个字啊';
					}
			    }
			    ,pass: [
			      /^[\S]{6,12}$/
			      ,'密码必须6到12位，且不能出现空格'
			    ]
			    ,content: function(value){
			      layedit.sync(editIndex);
			    }
			  });
			  //监听提交
			  form.on('submit(demo1)', function(data){
				  $.ajax({
						type : "POST",
						url : "/sc/updScView",
						data : $('form').serialize(),
						dataType : "json",
						success : function(data) {
							if (data.code == 0) {
								alert("修改成功");
// 								 $("form")[0].reset();
							}else if(data.code == 2){
								alert(data.msg);
								window.location.href="/login.html"
							} else {
								alert(data.msg);
							}
						}
					});
					return false;
			  });
		});
	</script>
</body>
</html>